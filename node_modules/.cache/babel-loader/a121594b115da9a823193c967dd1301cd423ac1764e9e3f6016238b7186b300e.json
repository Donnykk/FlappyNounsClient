{"ast":null,"code":"import { assert, makeError } from \"./errors.js\";\nexport function createGetUrl(options) {\n  async function getUrl(req, _signal) {\n    assert(_signal == null || !_signal.cancelled, \"request cancelled before sending\", \"CANCELLED\");\n    const protocol = req.url.split(\":\")[0].toLowerCase();\n    assert(protocol === \"http\" || protocol === \"https\", `unsupported protocol ${protocol}`, \"UNSUPPORTED_OPERATION\", {\n      info: {\n        protocol\n      },\n      operation: \"request\"\n    });\n    assert(protocol === \"https\" || !req.credentials || req.allowInsecureAuthentication, \"insecure authorized connections unsupported\", \"UNSUPPORTED_OPERATION\", {\n      operation: \"request\"\n    });\n    let error = null;\n    const controller = new AbortController();\n    const timer = setTimeout(() => {\n      error = makeError(\"request timeout\", \"TIMEOUT\");\n      controller.abort();\n    }, req.timeout);\n    if (_signal) {\n      _signal.addListener(() => {\n        error = makeError(\"request cancelled\", \"CANCELLED\");\n        controller.abort();\n      });\n    }\n    const init = {\n      method: req.method,\n      headers: new Headers(Array.from(req)),\n      body: req.body || undefined,\n      signal: controller.signal\n    };\n    let resp;\n    try {\n      resp = await fetch(req.url, init);\n    } catch (_error) {\n      clearTimeout(timer);\n      if (error) {\n        throw error;\n      }\n      throw _error;\n    }\n    clearTimeout(timer);\n    const headers = {};\n    resp.headers.forEach((value, key) => {\n      headers[key.toLowerCase()] = value;\n    });\n    const respBody = await resp.arrayBuffer();\n    const body = respBody == null ? null : new Uint8Array(respBody);\n    return {\n      statusCode: resp.status,\n      statusMessage: resp.statusText,\n      headers,\n      body\n    };\n  }\n  return getUrl;\n}\n// @TODO: remove in v7; provided for backwards compat\nconst defaultGetUrl = createGetUrl({});\nexport async function getUrl(req, _signal) {\n  return defaultGetUrl(req, _signal);\n}","map":{"version":3,"names":["assert","makeError","createGetUrl","options","getUrl","req","_signal","cancelled","protocol","url","split","toLowerCase","info","operation","credentials","allowInsecureAuthentication","error","controller","AbortController","timer","setTimeout","abort","timeout","addListener","init","method","headers","Headers","Array","from","body","undefined","signal","resp","fetch","_error","clearTimeout","forEach","value","key","respBody","arrayBuffer","Uint8Array","statusCode","status","statusMessage","statusText","defaultGetUrl"],"sources":["/Users/donny/Desktop/FlappyNounsClient/node_modules/ethers/lib.esm/utils/geturl-browser.js"],"sourcesContent":["import { assert, makeError } from \"./errors.js\";\nexport function createGetUrl(options) {\n    async function getUrl(req, _signal) {\n        assert(_signal == null || !_signal.cancelled, \"request cancelled before sending\", \"CANCELLED\");\n        const protocol = req.url.split(\":\")[0].toLowerCase();\n        assert(protocol === \"http\" || protocol === \"https\", `unsupported protocol ${protocol}`, \"UNSUPPORTED_OPERATION\", {\n            info: { protocol },\n            operation: \"request\"\n        });\n        assert(protocol === \"https\" || !req.credentials || req.allowInsecureAuthentication, \"insecure authorized connections unsupported\", \"UNSUPPORTED_OPERATION\", {\n            operation: \"request\"\n        });\n        let error = null;\n        const controller = new AbortController();\n        const timer = setTimeout(() => {\n            error = makeError(\"request timeout\", \"TIMEOUT\");\n            controller.abort();\n        }, req.timeout);\n        if (_signal) {\n            _signal.addListener(() => {\n                error = makeError(\"request cancelled\", \"CANCELLED\");\n                controller.abort();\n            });\n        }\n        const init = {\n            method: req.method,\n            headers: new Headers(Array.from(req)),\n            body: req.body || undefined,\n            signal: controller.signal\n        };\n        let resp;\n        try {\n            resp = await fetch(req.url, init);\n        }\n        catch (_error) {\n            clearTimeout(timer);\n            if (error) {\n                throw error;\n            }\n            throw _error;\n        }\n        clearTimeout(timer);\n        const headers = {};\n        resp.headers.forEach((value, key) => {\n            headers[key.toLowerCase()] = value;\n        });\n        const respBody = await resp.arrayBuffer();\n        const body = (respBody == null) ? null : new Uint8Array(respBody);\n        return {\n            statusCode: resp.status,\n            statusMessage: resp.statusText,\n            headers, body\n        };\n    }\n    return getUrl;\n}\n// @TODO: remove in v7; provided for backwards compat\nconst defaultGetUrl = createGetUrl({});\nexport async function getUrl(req, _signal) {\n    return defaultGetUrl(req, _signal);\n}\n//# sourceMappingURL=geturl-browser.js.map"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}